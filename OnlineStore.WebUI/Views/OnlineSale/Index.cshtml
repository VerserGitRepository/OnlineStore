@using System.Linq;
@model OnlineStore.WebUI.Models.MainPageProductsViewModel
@{
    ViewBag.Title = "Verser OnlineStore";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.1.1/css/mdb.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
<script src="~/Scripts/ProductPage.js"></script>

<div style="padding-left:112px;padding-right:111px;padding-bottom:5px;">
    <div id="myCarousel" class="carousel slide" data-ride="carousel">     
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active" style="background-color:orange" ></li>
                <li data-target="#myCarousel" data-slide-to="1" style="background-color:lightcyan"></li>
                <li data-target="#myCarousel" data-slide-to="2" style="background-color:lightgray"></li>
                <li data-target="#myCarousel" data-slide-to="3" style="background-color:lightskyblue"></li>
                <li data-target="#myCarousel" data-slide-to="4" style="background-color:black"></li>
            </ol>
            <!-- Wrapper for slides -->
            <div class="carousel-inner align-content-center">
                <div class="item active" style="background-color:orange">
                    <img src="~/Images/macbookpro5.jpg" alt="Los Angeles" style="width:20%;" onclick="LoadSingleProductPage('1')" class="img-responsive">
                </div>

                <div class="item" style="background-color:lightcyan">
                    <img src="~/Images/SurfacePro2.jpg" alt="Chicago" style="width:20%;" onclick="LoadSingleProductPage('2')" class="img-responsive">
                </div>
                <div class="item" style="background-color:lightgray">
                    <img src="~/Images/galaxys9.jpg" alt="New york" style="width:15%;" onclick="LoadSingleProductPage('3')" class="img-responsive">
                </div>
                <div class="item" style="background-color:lightskyblue">
                    <img src="~/Images/ipad2.jpg" alt="New york" style="width:30%;" onclick="LoadSingleProductPage('4')" class="img-responsive">
                </div>
                <div class="item" style="background-color:mediumspringgreen">
                    <img src="~/Images/mac4.jpg" alt="New york" style="width:15%;" class="img-responsive">
                </div>
            </div>
            <!-- Left and right controls -->
            <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#myCarousel" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
                <span class="sr-only">Next</span>
            </a>
        
        </div>
</div>


@foreach (var item in Model.OnlineSaleProductModel.Where(p => p.ItemType_ID == 15).OrderByDescending(m => m.Id).Take(4).ToList())
{
    <div style="padding-left:100px;padding-right:100px;">
        <div class="col-md-3" style="margin-top:20px">
            <div class="card">
                <div class="caption" style="padding:2px;">
                    <h5 class="pull-right" style="font-weight:800">$@item.PriceIncGST</h5>
                    <h6 style="font-weight:800">@item.ProductName</h6>
                    <p><img src="~/ProductImages/@item.Images.FirstOrDefault()" onclick="ShowProductDetailPage(@item.Id);" style="width:260px;height:280px;" class="img-responsive" /></p>
                </div>
                <div class="card-body">
                    <p class="card-text"></p>
                </div>
                @using (Html.BeginForm("AddToCartNoVerb", "OnlineSale", new { @id = item.Id, @returnUrl = string.Empty, @quantity = 1, @ItemPrice = item.PriceIncGST }, FormMethod.Post))
                {
                    //@Html.Hidden(item.Id.ToString());
                    <div>
                        @if (item.QtyAvailable > 0)
                        {
                            <button class="btn-success" style="align-content:center;background-color:#5cb85c;border-color:#4cae4c"><span class="glyphicon glyphicon-shopping-cart"></span> Add To Cart</button>
                        }
                        else
                        {
                            <h3 style="margin:0!important; text-align:center;background-color:indianred;color:white">Sold Out</h3>
                        }
                    </div>

                }
            </div>
        </div>
    </div>
}

@foreach (var item in Model.OnlineSaleProductModel.Where(p => p.ItemType_ID == 40).OrderByDescending(m => m.Id).Take(4).ToList())
{
    <div style="padding-left:100px;padding-right:100px;">
        <div class="col-md-3" style="margin-top:10px">
            <div class="card">
                <div class="caption" style="padding:2px;">
                    <h5 class="pull-right" style="font-weight:800">$@item.PriceIncGST</h5>
                    <h6 style="font-weight:800">@item.ProductName</h6>
                    <p><img src="~/ProductImages/@item.Images.FirstOrDefault()" onclick="ShowProductDetailPage(@item.Id);" style="width:260px;height:280px;" class="img-responsive" /></p>
                </div>
                <div class="card-body">
                    <p class="card-text"></p>
                </div>
                @using (Html.BeginForm("AddToCartNoVerb", "OnlineSale", new { @id = item.Id, @returnUrl = string.Empty, @quantity = 1, @ItemPrice = item.PriceIncGST }, FormMethod.Post))
                {
                    //@Html.Hidden(item.Id.ToString());
                    <div>
                        @if (item.QtyAvailable > 0)
                        {
                            <button class="btn-success" style="align-content:center;background-color:#5cb85c;border-color:#4cae4c"><span class="glyphicon glyphicon-shopping-cart"></span> Add To Cart</button>
                        }
                        else
                        {
                            <h3 style="margin:0!important; text-align:center;background-color:indianred;color:white">Sold Out</h3>
                        }
                    </div>

                }
            </div>
        </div>
    </div>
}

@foreach (var item in Model.OnlineSaleProductModel.Where(p => p.ItemType_ID == 3).OrderByDescending(m => m.Id).Take(4).ToList())
{
    <div style="padding-left:100px;padding-right:100px;">
        <div class="col-md-3" style="margin-top:10px">
            <div class="card">
                <div class="caption" style="padding:2px;">
                    <h5 class="pull-right" style="font-weight:800">$@item.PriceIncGST</h5>
                    <h6 style="font-weight:400">@item.ProductName</h6>
                    <p><img src="~/ProductImages/@item.Images.FirstOrDefault()" onclick="ShowProductDetailPage(@item.Id);" style="width:260px;height:280px;" class="img-responsive" /></p>
                </div>
                <div class="card-body">
                    <p class="card-text"></p>
                </div>
                @using (Html.BeginForm("AddToCartNoVerb", "OnlineSale", new { @id = item.Id, @returnUrl = string.Empty, @quantity = 1, @ItemPrice = item.PriceIncGST }, FormMethod.Post))
                {
                    //@Html.Hidden(item.Id.ToString());
                    <div>
                        @if (item.QtyAvailable > 0)
                        {
                            <button class="btn-success" style="align-content:center; background-color:#5cb85c;border-color:#4cae4c"><span class="glyphicon glyphicon-shopping-cart"></span> Add To Cart</button>
                        }
                        else
                        {
                            <h3 style="margin:0!important; text-align:center;background-color:indianred;color:white">Sold Out</h3>
                        }
                    </div>

                }
            </div>
        </div>
    </div>
}

@foreach (var item in Model.OnlineSaleProductModel.Where(p => p.ItemType_ID == 1).OrderByDescending(m => m.Id).Take(4).ToList())
{
    <div style="padding-left:100px;padding-right:100px;">
        <div class="col-md-3" style="margin-top:10px">
            <div class="card">
                <div class="caption" style="padding:2px;">
                    <h5 class="pull-right" style="font-weight:800">$@item.PriceIncGST</h5>
                    <h6 style="font-weight:800">@item.ProductName</h6>
                    <p><img src="~/ProductImages/@item.Images.FirstOrDefault()" onclick="ShowProductDetailPage(@item.Id);" style="width:250px;height:280px;" class="img-responsive" /></p>
                </div>
                <div class="card-body">
                    <p class="card-text"></p>
                </div>
                @using (Html.BeginForm("AddToCartNoVerb", "OnlineSale", new { @id = item.Id, @returnUrl = string.Empty, @quantity = 1, @ItemPrice = item.PriceIncGST }, FormMethod.Post))
                {
                    //@Html.Hidden(item.Id.ToString());
                    <div>
                        @if (item.QtyAvailable > 0)
                        {
                            <button class="btn-success" style="align-content:center;background-color:#5cb85c;border-color:#4cae4c"><span class="glyphicon glyphicon-shopping-cart"></span> Add To Cart</button>
                        }
                        else
                        {
                            <h3 style="margin:0!important; text-align:center;background-color:indianred;color:white">Sold Out</h3>
                        }
                    </div>

                }
            </div>
        </div>
    </div>
}

@foreach (var item in Model.OnlineSaleProductModel.Where(p => p.ItemType_ID == 2).OrderByDescending(m => m.Id).Take(4).ToList())
{
    <div style="padding-left:100px;padding-right:100px;">
        <div class="col-md-3" style="margin-top:10px">
            <div class="card">
                <div class="caption" style="padding:2px;">
                    <h5 class="pull-right" style="font-weight:800">$@item.PriceIncGST</h5>
                    <h6 style="font-weight:800">@item.ProductName</h6>
                    <p><img src="~/ProductImages/@item.Images.FirstOrDefault()" onclick="ShowProductDetailPage(@item.Id);" style="width:260px;height:280px;" class="img-responsive" /></p>
                </div>
                <div class="card-body">
                    <p class="card-text"></p>
                </div>
                <a href="@Url.Action("AddToCartNoVerb", "OnlineSale", new { @id = item.Id, @returnUrl = string.Empty,@quantity=1,@ItemPrice=item.PriceIncGST })">
                    <div class="card-footer bg-success" style="padding:0">
                        <button class="btn-success" style="align-content:center;background-color:#5cb85c;border-color:#4cae4c"><span class="glyphicon glyphicon-shopping-cart"></span> Add To Cart</button>
                    </div>
                </a>
            </div>
        </div>
    </div>
}

<div class="container" style="margin-bottom:40px;">
    <div class="col-sm-2">
        <div class="item"> <img style="max-width:100%;" src="~/Images/apple.jpg" alt="Submit" width="144" height="81"></div>
    </div>
    <div class="col-sm-2">
        <div class="item"> <img style="max-width:100%;" src="~/Images/samsung.jpg" alt="Submit" width="144" height="81"></div>
    </div>
    <div class="col-sm-2">
        <div class="item"> <img style="max-width:100%;" src="~/Images/dell.jpg" alt="Submit" width="144" height="81"></div>
    </div>
    <div class="col-sm-2">
        <div class="item"> <img style="max-width:100%;" src="~/Images/hp.jpg" alt="Submit" width="144" height="81"></div>
    </div>
    <div class="col-sm-2">
        <div class="item"> <img style="max-width:100%;" src="~/Images/microsoftlogo.jpg" alt="Submit" width="144" height="81"></div>
    </div>
    <div class="col-sm-2">
        <div class="item"> <img style="max-width:100%;" src="~/Images/logolenovo.jpg" alt="Submit" width="144" height="81"></div>
    </div>

</div>

<div id="spinner" style="display:none;">
    <img src="~/Images/ajax-loader.gif" />
</div>


<script>
    $('.carousel').carousel({
        interval: 2000
    });

    function ShowProductDetailPage(ProductId) {
        var objSpinner = null;

        $.ajax({
            type: "GET",
            data: { "ProductId": ProductId },
            url: '@Url.Action("ProductDetail", "OnlineSale")',
            beforeSend: function () {
                objSpinner = $.alert({
                    boxWidth: '50px',
                    useBootstrap: false,
                    title: '',
                    content: $("#spinner").html(),
                    buttons: {
                        yes: { isHidden: true }
                    }
                })
            },
            success: function (data) {
                $("#spinner").hide();
                objSpinner.close();
                $.confirm({
                    boxWidth: '800px',
                    useBootstrap: false,
                    title: '',
                    content: data,
                    closeIcon: true,

                    buttons: {
                        yes: { isHidden: true }
                    },
                });
            }
        });
    }

      function LoadSingleProductPage(ProductId) {
        var objSpinner = null;

        $.ajax({
            type: "Post",
            data: { "ProductId": ProductId },
            url: '@Url.Action("SingleProductPage", "OnlineSale")'                 
        }).done(function (res) {
            window.location.href = res.newUrl;
        }).fail(function (xhr, a, error) {
            console.log(error);
        });;
    }

</script>
<style>
    .item {
        left: 0;
        top: 10px;
        position: relative;
        overflow: hidden;
        margin-top: 10px;
    }

        .item img {
            -webkit-transition: 0.6s ease;
            transition: 0.6s ease;
        }

            .item img:hover {
                -webkit-transform: scale(1.2);
                transform: scale(1.2);
            }


    .img-thumbnail {
        border: 0px;
        border-radius: 0px;
    }

    .btn-success {
        width: 100%;
        border-radius:0px;
    }

        .btn-success:hover {
            background-color: #28a745 !important;
        }
</style>
